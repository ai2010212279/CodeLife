#### 什么是线程安全？

线程安全即是指在多线程环境下能够得到确定的结果。非线程安全是指在多线程环境下不能得到确定的结果。

以java7中HashMap为例：

两个线程A线程向Map中写入0-9999的key，B线程向Map中写入10000-19999的数。最终Map的size一般来说不会等于20000，而是比20000小。

更糟糕的是，在java7中，如果在多线程环境使用hahsmap，如果调用toString\(\)方法还会有死循环的危险。

这个问题在java8中得到了修复，但是java8的hashmap依旧不是线程安全的。

JDK8的HashMap.toString\(\)方法在多线程环境不会因resize造成死循环，原因是，java8中put元素时，是在链表尾部添加元素。

而java7是在链表头部添加元素。